Компьютер это инструмент для работы с информацией которая хранится в виде файлов. [[UNIX]] подобная ОС придерживается идеи[[ все есть файл]] поэтому в качестве файлов так же выступают, устройства, процессы, директории, [[сокеты]], [[пайпы.]]

Современная ОС **состоит из десятков и сотен тысяч файлов** которые нужно правильно организовать и предоставить пользователем и программам удобный доступ к ним, для этого используется [[файловая система]], но это довольно широкий термин для понимания которого нужно несколько точек зрения. 

---
### С точки зрения пользователя и прикладных программ

С точки **зрения пользователей и прикладных программ** файловая система это место для **записи и чтения файлов**. Пользователи видят иерархическую структуру организации файлов. Внутри директории хранятся файлы и другие директории которые так же могут хранить файлы и директории.

![[Screenshot From 2025-11-05 23-14-57.png]]

В Windows системах директории обычно называют папками. Но папка это термин относящийся к графической оболочки ОС, а директория к файловой системе. У папки обычно можно поменять иконку, цвет или добавить описание, чего не сделаешь с директории, хотя на линуксах тоже может стоять графический интерфейс, но при общение люди обычно подразумевают ни цвет, ни иконки, какой-то папки, а содержимое и  атрибуты файловой системы. Поэтому закрепилось выражение **директория.**

Структура организации файлов на **Windows системах и UNIX подобных системах несколько отличаются**. На Windows у вас некая файловая система которой вы назначаете букву `:C` внутри этой директории у вас есть несколько директорий, где то хранятся файлы пользователей, где то программы, где то файлы ОС. Когда вы подключаете флешку или любое другое устройство со своей файловой системой, ей назначается другая буква и через нее вы можете увидеть , содержимое этой файловой системы. **Структура этих файловых систем, независимы и не пересекаются**. 

> На UNIX подобных ОС используется другой подход так называемый [[FHS]] стандартом иерархии файловой системы. По этому стандарту многих файлов и директорий есть специальная пути, где они должны хранится. 

Допустим в Windows системах вы устанавливаете программы, то все ее файлы попадают в директорию `:C/Program Files` имя программы. А на UNIX подобных системах **большинство программ размазываются по системе**. Запускаемая часть программ попадают в директорию `/usr/bin`, ярлыки программ попадают `/usr/share/application`, настройки в `/etc` и так далее. Кроме удобства это так же помогает за безопасностью при правильных настройках, это следует из следующего отличия **корень на UNIX подобных системах один**, корень с точки зрения структуры это начала файловой системы, внутри которой хранятся первые директории. 

![[Screenshot From 2025-11-06 00-00-06.png]]

На Windows **у каждой файловой системе свой корень** `:C, :D` и тд.

![[Screenshot From 2025-11-06 00-03-07.png]]

А на UNIX подобных системах  **каждая файловая система прикрепляется (монтируется) к какай-то директории** внутри **единого корня**.

![[Screenshot From 2025-11-06 00-05-25.png]]

Допустим у вас может быть корневая система на SSD, файлы пользователя хранятся на отдельном диске, при этом доступ к ним в директории `/home`, а все документы вы держите на флешке могут быть доступны  в директории `/home/user/documents`. Три разных устройства, три разные файловые системы, но внутри одного корня.

Возвращаясь к теме безопасности, различным файловым системам, можно задать различные опции. Допустим, если у вас `/home` где обычно хранятся файлы пользователя на отдельной файловой системе, вы можете запретить запуск программ на этой файловой системе. Программы обычно лежат в директории `/usr/bin` куда у обычного пользователя **нет прав для доступа**, в итоге если какой-то пользователь скачает вирус к себе в домашнюю директорию, он просто не сможет его запустить.

![[Screenshot From 2025-11-06 00-10-29.png]]

Или допустим мы знаем, что в `/usr` лежат файлы программ, если отделить `/usr` на другую файловую систему, то после установки всех программ мы можем убрать права записи в эту файловую систему, в итоге вирус не сможет воспользоватся уязвимостью программ, изменить ее запускаемый файл, что бы добавить в него вредоносный код. А **в момент обновления, мы просто возвращаем файловой системе право на запись**, обновляем программы и опять возвращаем как было.

Как вы возможно заметили, я упомянул файловую систему еще с двух точек зрения, когда я говорил о **файловых системах на устройствах**, когда говорил про **опции про запуск или запись**.

---
### С точки зрения устройства

**С точки зрения устройств** - файловая система, это способ записи и чтения файлов на устройств. Недостаточно просто записать файл на диск, нужно еще определить куда писать файл, как с ним работать и тд. Это зависит от типа файловых систем `NTFS, XFAT, ext4, btrfs и тд.`

[[Файл]] условно можно **разделить на 3 части**:

- Данные внутри файла
- [[Жесткая ссылка]]
- Информация об этом файле

![[Screenshot From 2025-11-06 12-38-02.png]]

Информация о файле называется [[метаданными]] и на UNIX подобных системах хранится на файловых системах в структурах данных называемых [[инодами]]

> **В UNIX-подобных системах все метаданные файла хранятся в структуре, которая называется inode (инода).**

То есть, все [[метаданные хранятся в инодах]]

У каждой иноды есть свой уникальный номер, что-бы ОС могла найти **иноду по** 
**имени файла она использует жесткую ссылку**.

**Подводя итоги**, файлы которые мы обычно видим на ПК это жесткие ссылки в которых содержатся номер иноды, а в иноде содержатся информация о файле и его местоположение на устройстве.

> Этих жестких ссылок которые ссылаются на одну и ту же иноду, могут быть несколько, по сути это способ обращения к одному и тому же файлу по разным именам, и с разных директорий внутри одной файловой системы. Потому что жесткая ссылка часть файловой системы

Когда вы **удаляете последнюю жесткую ссылку на файл**, файловая система очищает инод запись и помечает местоположения данных файлов как свободные, хоть там и лежат данные. Когда появится необходимость записать новый файл, файловая система запишет туда новые данные, но пока это не произошло, есть вероятность восстановить эти данные.

---
### С точки зрения ОС

**С точки зрения ОС** - файловая система это[[ драйвер модуль ядра]], этот драйвер представляет интерфейс через  которую программы могут взаимодействовать с файлами и в момент монтирования файловой системы, вы можете указать специальные опции монтирования, например что-бы файловая система была только для чтения. На GNU/Linux системах есть возможность установить модули для работы с множеством различных типах файловых систем, включая файловую систему других ОС, допустим `NTFS` . Но на `NTFS` нет некоторых функций для работы Linux, допустим правка UNIX подобных системах и тд. В следствие чего, невозможно установить Linux на NTFS, хотя можно использовать такую файловую систему для хранения пользовательских данных. 

В Windows не содержит драйверов для работы с файловой системы ext4 на обычно которых устанавливается линукс, из-за чего если у вас две ОС на ПК, на линуксе видны файлы windows, а в windows не видит линукс, а что бы увидеть линукс надо установить специальные утилиты. 

![[Screenshot From 2025-11-06 15-52-36.png]]

Есть множество различных типов файловых систем, различающийся функционалом и возможностями, но самый используемый на линукс это ext4 

![[Screenshot From 2025-11-06 15-54-14.png]]



