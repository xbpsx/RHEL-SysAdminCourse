При пермещение в рамках одной файловой системы, нам не нужно создавать копию данных, нам просто нужно изменить путь к этому файлу, для этого нам не нужно затрагивать сами данные, **достаточно создать просто жесткую ссылку в новном месте и удалить в старом.** За это отвечает команда `mv`, синтаксис во многом похож на команду `cp`, та же интерактивность с ключом и тот же апдейт и все остальное.

> ⚠️ **Будьте осторожны!** `mv` перезаписывает существующие файлы без предупреждения.

- `-i` — спросить подтверждение перед перезаписью

- `-v` — показать подробности операции

- `-n` — не перезаписывать существующие файлы

**Коротко:** `mv` — это и "переместить" и "переименовать" в одном.

---
### Перемещение файла

```bash
mv исходный_файл целевая_папка/
```

```bash
mv document.txt ~/Documents/
```

Но в отличие от `cp` при перемещение **директории(папки)** нам не нужно указывать опцию `-r` (рекурсивно), достаточно написать `mv dir2 dir1`. Почему не нужно, дело в том, что директория это [[специальный файл]], внутри которого есть список жестких ссылок, которые находятся в этой директории и [[две специальные жесткие сслыки]] на себя и на директорию выше, одна точка `.` и две точки `..`

![[screenshot-20251121-122105.png]]

Перемещая директорию(папку) вы просто перемещаете лист, при этом вам не нужно ничего делать с файлами в этом листе. Но, все выше сказанное **работает в рамках одной ОС**. Так как жесткие ссылки, это часть файловой системы, **они содержат номер инода, а не данные**. Поэтому перемещение из одной файловой системы в другую, это просто копирование данных, с удалением, того что было, хотя это делается той же командой `mv`

---
### Переименование

> Имена файлов, это жесткие ссылки которые содержат имя и номер иноды

**Поменять имя** - это создать жесткую ссылку с новым именем и удалить со старым. Именно этим занимаеться команда `mv`. Если вы хотите переименовать файл или директориюю.

```bash
mv старое_имя новое_имя
```

```bash
mv file.txt document.txt
```

---
### Удаление

Удаление работает с жесткой ссылкой. Для удаления используется команда `rm` (remove), опции во многом совпадает с предыдущими командами.

```bash
rm -v file.txt
```

```bash
[darker@archlinux Downloads]$ rm -v file.txt
removed 'file.txt'
```

Можем разом **удалить несколько файлов или директорий**

```bash
rm -v file1 file2 file3
```

Если мы хотим **удалить все в текущей директории**

```bash
rm -r *
```

Одна из самых мемных команд, удаляет все в корне включая все под директории, **удаляет все файлы в системе**

```bash
rm -rf /
```

---
### Жёсткие ссылки

**Жесткая ссылка (hard link)**

Жесткая ссылка - это дополнительное имя для уже существующего файла. Все жесткие ссылки равноправны и указывают на одни и те же данные на диске.

**Особенности:**

- Все ссылки равны - нет "оригинала" и "копии"

- Занимают минимум места (только запись в директории)

- Изменения в файле видны через все ссылки

- Удаление одной ссылки не затрагивает другие

- Нельзя создать ссылку на другую файловую систему


> Файл существует пока, есть хотя бы одна жесткая ссылка на него

В прошлый раз мы создавали жесткую ссылку с помощью команды `cp -vl` обычно для создания жестких ссылок используется команда `ln` (link), синтаксис довольно простой `ln file имя для новой жесткой ссылки`

```bash
ln -v file samefile
```

**Жесткие ссылки работают только для файлов, а не директорий.** Так, как жесткая ссылка для директорий может создать проблему для файловой системе.

Жестие ссылки можно создавать и удалять, друг на друга они никак не влияют. Жесткие ссылки часто используются при [[бэкапе данных]], когда у вас есть копия данных изменились только некоторые файлы. И вместо того, чтобы копировать в новую директорию абсолютно все, вы просто кладете туда новые файлы и жесткие ссылки на не изминениые файлы. Это позволяет сэкономить место, так как жесткие ссылки практчиеский ничего не весят, в отл ичие от копии данных.

---
### Символические ссылки

Кроме жестких ссылок существуют еще [[символические ссылки]] , на английском кроме symbolic link часто говорят soft link. Символическая ссылка ссылается не на иноду, а на жесткую ссылку и создаются с помощью

```bash
ln -s file samefile # Файл и имя для ссылки
```

Так же символические ссылки работают с директориями. Такой ссылке вообще все равно, есть файл или нет, удалили или не создали, символ ическая ссылка может ссылаться на файл и на других файловых системах.

Cимволические ссылки **можно увидеть** командой

```bash
ls -l
```

Эта команда дает много информации, но сейчас нас интересует первый символ. **Первый символ говорит о типе файла** если `-` то это обычный файл, а  правильней жесткая ссылка, если `d` это директория, а если `l` то это символическая ссылка, а в **последнем столбике** видны имена файлов и директорий, рядом с символическими ссылками стоит символ показывающий на какой файл ссылается символическая ссылка, если этого файла нет, например удалили, но ссылка все еще остается и становится **битой ссылкой**

```bash
[darker@archlinux Downloads]$ ls -l
total 0
-rw-r--r--   1 darker darker 2688604 Nov 14 09:49  bg-2.png

drwxr-xr-x 2 darker darker 4096 Nov 21 11:30 'Telegram Desktop'

lrwxrwxrwx.  1  user  user  1 May  9  16:43  softdir -> dir
lrwxrwxrwx.  1  user  user  4 May  9  16:44  soflink -> file

```

Ссылки это специальные файлы, значит удалюятся простой командой `rm` 

Многие новички, **путают символические ссылки с ярлыками,** но это не так. Ярлык относится к графической оболочки, ему можно поставить описание, иконку, а так же прописать команду запуска, чем активно пользуются вирусы на флешках.

> Возможно вы сталкивались, вставили флешку в ПК, а там все содержимое превратилось в ярлыки. Люди ведутся на обман, щелкают по ярлыкам. А в этих ярлыках как правильно содержится команда для запуска скрытного вируса который прописывает себя в планировщик задач, многие антивирусы просто не реагируют на такое поведение.

Символические ссылки больше относятся к файловой системе, а путают их потому-что приминения их примерно одинакого, допустим вам нужен простой путь к директории или файлу, допустим если хотим видеть в домашней директории, другую диреткорию.



