## **Практические скрипты системного администратора**

Скрипт для автоматического бэкапа:

```bash
#!/bin/bash
# backup-sites.sh

BACKUP_DIR="/backups/$(date +%Y-%m-%d)"
mkdir -p "$BACKUP_DIR"

# Бэкап баз данных
mysqldump -u root -p"$DB_PASS" all_databases > "$BACKUP_DIR/db.sql"

# Бэкап веб-сайтов
tar -czf "$BACKUP_DIR/websites.tar.gz" /var/www/html/

# Удаляем бэкапы старше 30 дней
find /backups/ -type d -mtime +30 -exec rm -rf {} \;
```

**Скрипт деплоя:**

```bash
#!/bin/bash
# deploy-app.sh

SERVER=$1
VERSION=$2

if [ -z "$SERVER" ] || [ -z "$VERSION" ]; then
    echo "Использование: $0 <сервер> <версия>"
    exit 1
fi

scp "app-$VERSION.tar.gz" "admin@$SERVER:/tmp/"
ssh "admin@$SERVER" "
    tar -xzf /tmp/app-$VERSION.tar.gz -C /opt/app/
    systemctl restart app-service
    echo 'Деплой версии $VERSION на $SERVER завершен'
"
```

