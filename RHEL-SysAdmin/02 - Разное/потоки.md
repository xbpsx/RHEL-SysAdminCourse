## Что такое потоки (Threads)

### Простыми словами (Как для строительной бригады):

Представьте, что **процесс** — это стройплощадка, а **потоки** — это рабочие на этой площадке:

- **Стройплощадка (процесс)** имеет:

    - Общие ресурсы (краны, бетономешалки, склады)

    - Общий план строительства (проект)

    - Общую территорию (память)

- **Рабочие (потоки)** имеют:

    - Свои конкретные задачи (один кладет кирпичи, другой прокладывает проводку)

    - Общаются между собой напрямую (быстро)

    - Используют общие инструменты площадки

    - Могут работать параллельно


### Техническое определение:

**Поток (thread)** — это наименьшая единица выполнения внутри процесса. Это "облегченный процесс", который разделяет с другими потоками того же процесса:

- Память (код, данные, heap)

- Открытые файлы

- Сетевые соединения

- Переменные окружения

### Для системного администратора:

#### Мониторинг потоков:

```bash
# Просмотр потоков процесса
ps -eLf | grep nginx
ps -T -p <PID>

# В htop (включить отображение потоков)
# F2 -> Display Options -> [X] Show custom thread names
# Или нажмите 'H' для показа потоков

# Детальная информация
cat /proc/<PID>/task/   # список потоков процесса
cat /proc/<PID>/task/<TID>/status  # статус конкретного потока
```

#### Практические примеры:

**Веб-сервер Nginx** использует multiple processes + multiple threads:

```bash
# Просмотр потоков nginx
ps -eLf | grep nginx
```

```text
UID    PID   PPID    LWP  C NLWP STIME TTY      TIME CMD
www-data 1234 1 1234 0 4 10:00 ? 00:00:00 nginx: worker process
www-data 1234 1 1235 0 4 10:00 ? 00:00:01 nginx: worker process  
www-data 1234 1 1236 0 4 10:00 ? 00:00:01 nginx: worker process
```

**База данных PostgreSQL** активно использует потоки:

```bash
# Потоки PostgreSQL
ps -eLf | grep postgres | head -5
```

#### Преимущества потоков для админа:

- **Экономия памяти** — потоки делят общую память

- **Быстрое создание** — создание потока быстрее создания процесса

- **Эффективная коммуникация** — прямые доступ к общей памяти

- **Параллелизм** — настоящая параллельная работа на multi-core CPU

